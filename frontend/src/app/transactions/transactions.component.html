<app-toolbar></app-toolbar>

<button mat-fab color="primary" class="filter-fab" (click)="toggleFilters()">
  <mat-icon>filter_alt</mat-icon>
</button>

<!-- Panel de filtros -->
<div class="filter-overlay" *ngIf="true" (click)="closeFilters()">
  <div class="filter-panel" (click)="$event.stopPropagation()">
    <header class="filter-header">
      <h3>Filters</h3>
      <button mat-icon-button (click)="closeFilters()" class="close-button">
        <mat-icon>close</mat-icon>
      </button>
    </header>

    <mat-form-field>
      <mat-label>Enter a date range</mat-label>
      <mat-date-range-input [rangePicker]="picker">
        <input matStartDate placeholder="Start date" />
        <input matEndDate placeholder="End date" />
      </mat-date-range-input>
      <mat-hint>DD/MM/YYYY â€“ DD/MM/YYYY</mat-hint>
      <mat-datepicker-toggle
        matIconSuffix
        [for]="picker"
      ></mat-datepicker-toggle>
      <mat-date-range-picker #picker></mat-date-range-picker>
    </mat-form-field>

    <section class="example-section">
      <h4>Select your toppings:</h4>
      <p><mat-checkbox>Pepperoni</mat-checkbox></p>
      <p><mat-checkbox>Extra Cheese</mat-checkbox></p>
      <p><mat-checkbox>Mushroom</mat-checkbox></p>
    </section>

    <!-- <mat-form-field appearance="fill">
      <mat-label>Status</mat-label>
      <mat-select [(ngModel)]="filters.status">
        <mat-option value="">All</mat-option>
        <mat-option value="pending">Pending</mat-option>
        <mat-option value="approved">Approved</mat-option>
        <mat-option value="rejected">Rejected</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Amount Range</mat-label>
      <mat-slider [(ngModel)]="filters.amount" min="0" max="10000" step="100" thumbLabel></mat-slider>
    </mat-form-field>

    <button mat-raised-button color="primary" (click)="applyFilters()">Apply</button>
    <button mat-stroked-button color="warn" (click)="clearFilters()">Clear</button> -->
  </div>
</div>

<mat-tab-group animationDuration="500ms">
  <!-- tab 1 - pending transactions -->
  <mat-tab>
    <ng-template mat-tab-label>
      <mat-icon class="example-tab-icon" style="color: #e38100fe"
        >hourglass_empty</mat-icon
      >
      Pending
    </ng-template>
    <!-- if loading -->
    <div *ngIf="loading" class="loading-container">
      <mat-spinner [diameter]="60"></mat-spinner>
    </div>

    <!-- already loaded -->
    <div *ngIf="!loading" class="page-container">
      <!-- title -->
      <div class="underlined-title">
        <div class="title-buttons">
          <h2>Create Transaction</h2>
          <div class="money-buttons">
            <button mat-flat-button (click)="sendTransaction()">
              <mat-icon>request_page</mat-icon>
              Send Money
            </button>
            <button mat-stroked-button (click)="requestTransaction()">
              <mat-icon>quiz</mat-icon>
              Ask for Money
            </button>
          </div>
        </div>
        <hr />
      </div>

      <mat-form-field>
        <mat-label>Choose a date</mat-label>
        <input matInput [matDatepicker]="picker" />
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle
          matIconSuffix
          [for]="picker"
        ></mat-datepicker-toggle>
        <mat-datepicker #picker panelClass="custom-datepicker"></mat-datepicker>
      </mat-form-field>

      <span style="display: block; height: 20px"></span>

      <div class="underlined-title">
        <h2>Transactions you need to approve</h2>
        <hr />
      </div>
      <!-- table 1 -->
      <app-table
        [columns]="columns"
        [data]="pendingMyApproval"
        [enableSelection]="false"
        [enableActions]="true"
        (action1)="openDetails($event)"
        [action1Icon]="'visibility'"
        [action1Tooltip]="'View details'"
        (action2)="approveTransaction($event)"
        [action2Icon]="'task_alt'"
        [action2Tooltip]="'Approve transaction'"
        (action3)="rejectTransaction($event)"
        [action3Icon]="'block'"
        [action3Tooltip]="'Reject transaction'"
        [action2Color]="'green'"
        [action3Color]="'red'"
      />
      <div class="underlined-title">
        <!-- table 2 -->
        <h2>Transactions pending for others</h2>
        <hr />
      </div>
      <app-table
        [columns]="columns"
        [data]="pendingOthers"
        [enableSelection]="false"
        [enableActions]="true"
        (action1)="openDetails($event)"
        [action1Icon]="'visibility'"
        [action1Tooltip]="'View details'"
        (action2)="approveTransaction($event)"
        [action2Icon]="'task_alt'"
        [action2Tooltip]="'Approve transaction'"
        (action3)="rejectTransaction($event)"
        [action3Icon]="'block'"
        [action3Tooltip]="'Reject transaction'"
        [action2Color]="'green'"
        [action3Color]="'red'"
      />
    </div>
  </mat-tab>

  <!-- tab 2 - sender transactions -->
  <mat-tab>
    <ng-template mat-tab-label>
      <mat-icon class="example-tab-icon" style="color: #f44336"
        >call_made</mat-icon
      >
      Sent
    </ng-template>
    <div *ngIf="loading" class="loading-container">
      <mat-spinner [diameter]="60"></mat-spinner>
    </div>
    <!-- already loaded -->
    <div *ngIf="!loading" class="page-container">
      <div class="underlined-title">
        <div class="title-buttons">
          <h2>Sent Transactions</h2>
          <div class="money-buttons">
            <button mat-flat-button (click)="sendTransaction()">
              <mat-icon>request_page</mat-icon>
              Send Money
            </button>
            <button mat-stroked-button (click)="requestTransaction()">
              <mat-icon>quiz</mat-icon>
              Ask for Money
            </button>
          </div>
        </div>
        <hr />
      </div>
      <!-- end title -->

      <app-table
        [columns]="columns"
        [data]="sender"
        [enableSelection]="false"
        [enableActions]="true"
        (action1)="openDetails($event)"
        [action1Icon]="'visibility'"
        [action1Tooltip]="'View details'"
      >
      </app-table>
    </div>
  </mat-tab>

  <!-- tab 3 - receiver transactions -->
  <mat-tab>
    <ng-template mat-tab-label>
      <mat-icon class="example-tab-icon" style="color: #4caf50"
        >call_received</mat-icon
      >
      Received
    </ng-template>
    <div *ngIf="loading" class="loading-container">
      <mat-spinner [diameter]="60"></mat-spinner>
    </div>
    <!-- already loaded -->
    <div *ngIf="!loading" class="page-container">
      <div class="underlined-title">
        <div class="title-buttons">
          <h2>Received Transactions</h2>
          <div class="money-buttons">
            <button mat-flat-button (click)="sendTransaction()">
              <mat-icon>request_page</mat-icon>
              Send Money
            </button>
            <button mat-stroked-button (click)="requestTransaction()">
              <mat-icon>quiz</mat-icon>
              Ask for Money
            </button>
          </div>
        </div>
        <hr />
      </div>

      <app-table
        [columns]="columns"
        [data]="receiver"
        [enableSelection]="false"
        [enableActions]="true"
        (action1)="openDetails($event)"
        [action1Icon]="'visibility'"
        [action1Tooltip]="'View details'"
      >
      </app-table>
    </div>
  </mat-tab>
</mat-tab-group>
